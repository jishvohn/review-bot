import os
import pdb
import openai
from langchain import PromptTemplate

USER_QUERY = "mediterranean food"
openai.api_key = os.getenv("OPENAI_API_KEY")

# I'm going to create some real data and test with that real data here
# to actually send it to the GPT API and see if the prompt makes sense
# basically do some prompt experimentation

dataset_items = [{'directUrl': 'https://www.yelp.com/biz/barcha-san-francisco', 'bizId': '5D--FJXQHdC3kZWYm2GREg', 'name': 'Barcha', 'since': '', 'phone': '(415) 957-5463', 'amenitiesAndMore': ['Takes Reservations', 'Offers Delivery', 'Offers Takeout', 'All staff fully vaccinated', 'Pescatarian Options', 'Vegan Options', 'Many Vegetarian Options', 'Masks required', 'Staff wears masks', 'Accepts Credit Cards', 'Accepts Android Pay', 'Accepts Apple Pay', 'Accepts Cryptocurrency', 'Outdoor Seating', 'Trendy', 'Moderate Noise', 'Offers Catering', 'Good for Groups', 'Good for Lunch, Dinner', 'Garage Parking, Street Parking', 'Waiter Service', 'Free Wi-Fi', 'Full Bar', 'Dogs Allowed', 'Wheelchair Accessible', 'TV', 'Gender-neutral restrooms', 'Open to All', 'Heated Outdoor Seating', 'Covered Outdoor Seating', 'Not Good For Kids', 'No Happy Hour', 'No Drive-Thru', 'No Private Dining', 'Bike Parking', 'Provides reusable tableware'], 'healthScore': 'PASS', 'operationHours': [{'day': 'Mon', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 2:00 PM', '3:00 PM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Tue', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 2:00 PM', '3:00 PM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Wed', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 2:00 PM', '3:00 PM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Thu', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 2:00 PM', '3:00 PM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Fri', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 2:00 PM', '3:00 PM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sat', 'regularIsClosed': False, 'regularHours': ['5:00 PM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sun', 'regularIsClosed': True, 'regularHours': None, 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}], 'upcomingSpecialHours': [], 'website': 'http://barcha-sf.com/', 'images': [{'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/0eAEaTTCEaSvAzcqAx9uEg/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States. Tahdig with Duck Leg & Fried Egg'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/NMq_1Rbnls3zR_61sMI2Dg/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/cDYaSM1m04o63iyzQryU9A/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States. Spit-Roasted Galf Rack of Lamb'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/64KQ0Z4eyQAKtFZY93rSyw/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States. Shakshuka with Lamb Merguez  Sausage and Perfect Eggs'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/MmT3d_T4QkhxZWGz9m89hQ/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/-KSx6ar6HB5RgLSbijpINA/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/0sPDkj15yWr9P3DvNm9ASw/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States. Lunch Kale & Arugula Salad with Chicken Shawarma'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/dOkeQIAsfVtj-SZBjR8lkA/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States. Olive Oil Poached Octopus'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/wHBo9u-7zXaMB_vqA4UIYQ/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/mHjY5SkrHb46NL-Jl52DEg/258s.jpg', 'alt': 'Photo of Barcha - San Francisco, CA, United States'}], 'address': {'addressLine1': '28 Fremont St', 'addressLine2': '', 'addressLine3': '', 'city': 'San Francisco', 'regionCode': 'CA', 'postalCode': '94105', 'country': 'US'}, 'type': 'Restaurants', 'primaryPhoto': 'https://s3-media0.fl.yelpcdn.com/bphoto/0eAEaTTCEaSvAzcqAx9uEg/l.jpg', 'priceRange': '$31-60', 'cuisine': 'Mediterranean', 'categories': ['Restaurants', 'Mediterranean'], 'aggregatedRating': 4, 'reviewCount': 700, 'businessHighlights': ['Romantic vibe', 'Full bar', 'Vegetarian friendly', 'Gluten-free friendly', 'Healthy dining', 'Locally sourced ingredients'], 'scrapeFinishedAt': '2023-04-16T08:40:58.352Z', 'reviews': [{'date': '2023-03-14T00:00:00.000Z', 'rating': 5, 'text': "I came to Barcha a few months back with three other friends. Honestly great food, great service, love the laid back and dimly lighted ambience. \n\nBetween the four of us we decided to get the Moroccan cigars, the chickpea hummus for the starters along with a few of their speciality cocktails - Marbella and the Spanish Sangria. \nThe cocktails were delicious specially the Spanish sangria. The appetisers were quite good specially the Moroccan cigars which had a great flavour to it.\n\nFor the mains we ordered the grilled chicken kebabs and the half lamb rack. I loved how tender the chicken was and the lamb just melted in my mouth. The lamb was definitely the highlight of the night and I would come back for it. Mediterranean food is one of my favourite cuisines and I really enjoyed the food at Barcha.\nWe ordered the Turkish Baklava and the Mocha Mayes cake for the desserts and both the desserts were spectacular. I loved dining here, the only drawback is that it's very pricy. \n\nI would love to come back here but only when there's a special occasion.", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/Q8bviNP6IEEfJ4sk3Bk5HA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/ivqKq4Srqb3GdqSFf_qaQw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/-XFqZRieELbbxT4kzuvgJA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/v5ujDvvbb8RuKpQXMGdVfw/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 60, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2023-04-07T00:00:00.000Z', 'rating': 4, 'text': "Confirmed (per my previous review) that the dinner menu is better. Much better, actually. The lunch menu really pales in comparison and they'd do better to work those better dishes into both lunch and dinner services. \n\nAnyway, the spreads were very good at the start but the size of the dish was probably a bit much for me as a solo diner. Split between two or three people, you won't get palate fatigue. \n\nThe cigars were... hm... inconsistently great. It must have been the distribution of ingredients. Some bites were okay, some were intoxicating. \n\nThe croquettas were great, maybe even perfect, after I let them sit for a few minutes, but they were served way too hot. \n\nThe cake... I won't talk about the cake. \n\nFor drinks, the gin and tonic was perfect like last time, the sangria was really good, but the bartender isn't good at recommendations because when I asked for something similar to the gin and tonic they gave me something that maybe wasn't bad but wasn't remotely as refreshing. \n\nOne gripe I have with the service that's gone wrong twice now is both times I've been here I've explicitly asked for the dishes to be staggered and both times they've brought the first two dishes I ordered together. Next time I go I'll be sure to order one thing at a time as opposed to everything at once. Everyone's very nice so I don't want to complain too harshly but they've totally misunderstood or ignored this request twice now.", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/8yg2UDnf7mTiOzfKYhrwUA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/ovzAx7mMNnBtk7iT-_F_VQ/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/eEH8KYd-CKEyis7agze93g/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/2Kb8SX4e8J6bmX5UBxqtBg/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 34, 'reviewerLocation': 'South San Francisco, CA'}, {'date': '2023-03-31T00:00:00.000Z', 'rating': 4, 'text': "Great ambiance with the utmost attentive and friendly staff. \n\nThis is a great place for Mediterranean food; every dish came out packed with flavor. Here's what we ordered:\n\n- Spiced beef dumplings: these were just okay for me, a bit overrated\n- Spit Roasted Half Lamb Rack: Really enjoyed this - very flavorful and was probably one of my favorite dishes of the night. Easily a 5/5 for me; however, a friend thought it was a bit too salty for her \n- \xa0Prime NY Steak: appreciate the huge portion - very very filling. Friends had to take the rest to go \n- Dessert (vanilla bean soft serve, baklava story, affogato): solid desserts. If I came here again, I would definitely get the baklava again; lovely presentation, not too sweet, offers a crunch\n\nOverall, the quality of the food and dining experience was exceptional! 10/10 would come again!", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/IDf0OZbtA_YJCu2hLb2lzw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/WEuQ_4EcF6PnTnCfmNwUbA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/i7BTE1Rqvd4FDns_v4Xzlg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/VXO5Yku6ttZG-Xfet7vIcQ/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 26, 'reviewerLocation': 'San Jose, CA'}, {'date': '2023-03-30T00:00:00.000Z', 'rating': 4, 'text': 'Barcha is a nicely decorated, upscale mediterranean restaurant with indoor and outdoor seating. My colleagues and I came for lunch and were seated at one of the high top tables at the back of the dining room. \n\nI had the Grilled Skirt Steak that came with a salad and fries. The steak was juicy, the fries were seasoned so well, and the salad was light and fresh. \n\nThe food is pricey here. Would definitely recommend Barcha for a special occasion rather than a work day lunch.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 1, 'isCoolCount': 1, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/6LTSia0bYvds2Ii9oDevEA/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 199, 'reviewerLocation': 'Milpitas, CA'}, {'date': '2023-03-18T00:00:00.000Z', 'rating': 4, 'text': "I used to work in San Franciso for about 16 years and have walked past Barcha a zillion times and never bothered to check it out...\n\nI know I suck lol but when it comes to a good friend choosing her birthday dinner at Barcha, why not?!\nBarcha has this modern vibe and sleek decor. \xa0Mediterranean tapas with distinctive flavors made you want to order two of everything. \n\nShout out to Constantino, who accommodated us gals. I won't go into detail about each fish, but the appetizers we ordered two of and everything else was a winner. \n\nThank you again, Barcha! Definitely, I will come back", 'language': 'en', 'isFunnyCount': 6, 'isUsefulCount': 10, 'isCoolCount': 11, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/S2PN86zY1bGKnDwNsr6hYQ/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/3b1qq23ptvzUJuGWHwnxyA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/VJ95FjAmgfMOMx-OxVTpqw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/UvgrbVTGEUnSggJdpScE9w/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 1056, 'reviewerLocation': 'Hercules, CA'}], 'availableReviewsLanguages': [{'language': 'English', 'languageCode': 'en', 'totalReviews': 699}, {'language': 'Spanish', 'languageCode': 'es', 'totalReviews': 1}]}, {'directUrl': 'https://www.yelp.com/biz/orens-hummus-san-francisco', 'bizId': '56gj15LDt8mcDIeKCbu-tg', 'name': "Oren's Hummus", 'since': '', 'phone': '(415) 915-6736', 'amenitiesAndMore': ['Takes Reservations', 'Offers Delivery', 'Offers Takeout', 'Pescatarian Options', 'Vegan Options', 'Many Vegetarian Options', 'Masks required', 'Staff wears masks', 'Accepts Credit Cards', 'Accepts Apple Pay', 'Outdoor Seating', 'Casual, Trendy', 'Moderate Noise', 'Casual Dress', 'Offers Catering', 'Good for Groups', 'Good For Kids', 'Good for Breakfast, Brunch, Lunch, Dinner', 'Garage Parking, Street Parking', 'Waiter Service', 'Free Wi-Fi', 'Beer & Wine Only', 'Wheelchair Accessible', 'Heated Outdoor Seating', 'Private Dining', 'No Happy Hour', 'Dogs Not Allowed', 'No TV', 'No Covered Outdoor Seating', 'Provides reusable tableware', 'No Bike Parking'], 'healthScore': 'PASS', 'operationHours': [{'day': 'Mon', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Tue', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Wed', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Thu', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Fri', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sat', 'regularIsClosed': False, 'regularHours': ['10:30 AM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sun', 'regularIsClosed': False, 'regularHours': ['10:30 AM - 9:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}], 'upcomingSpecialHours': [], 'website': 'http://www.orenshummus.com/locations.html', 'images': [{'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/Vk621yuP_J4Qp6_fgC0xCQ/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. Oren's San Francisco"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/3ONcw14dro4f6wo2nlH6GQ/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. Israeli Breakfast tower"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/5ZjNxC48Wg3VN8rOFBLC0Q/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/BMlbc5jCfzw5X7ewKkyP2w/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/WDMFeeXcXwwpqV-NIq6sHw/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/LIDeVaJn7Anr76lO1inM2g/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. Inside look of the Green Herb Falafel"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/LONZ2y2A6ukQWqnW-Qb7-A/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. Gorgeous!"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/KnyVUvC-nXW1j41cHsKvoQ/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. Chocolate Babka"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/mk_t068zV8yj8AjCXcfY0A/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. hummus with cauliflower"}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/m_RZX9puqLaPz83wZmdaDg/258s.jpg', 'alt': "Photo of Oren's Hummus - San Francisco, CA, United States. Hummus Chicken"}], 'address': {'addressLine1': '71 3rd St', 'addressLine2': '', 'addressLine3': None, 'city': 'San Francisco', 'regionCode': 'CA', 'postalCode': '94103', 'country': 'US'}, 'type': 'Restaurants', 'primaryPhoto': 'https://s3-media0.fl.yelpcdn.com/bphoto/Vk621yuP_J4Qp6_fgC0xCQ/l.jpg', 'priceRange': '$11-30', 'cuisine': 'Mediterranean', 'categories': ['Restaurants', 'Mediterranean'], 'aggregatedRating': 4, 'reviewCount': 899, 'businessHighlights': [], 'scrapeFinishedAt': '2023-04-16T08:41:03.603Z', 'reviews': [{'date': '2023-03-30T00:00:00.000Z', 'rating': 5, 'text': '+ \xa0Quality food \n+ \xa0Knowledgeable and welcoming staff who were happy to guide us thru the menu \n+ \xa0Fancy & cute interior decoration', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 1, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/smXak9icP-sTAhn5CanEbA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/IctwuC0v3A1693OQRzO-LA/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 41, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2023-03-26T00:00:00.000Z', 'rating': 4, 'text': 'I came here with a big group during GDC and this place is great for a mid-conference meetup. Lots of room inside.\n\nGood: \n- I always love the food here - I always get the hummus eggplant dish. Such great portion sizes and the eggplant is super tasty. \n- Whole wheat pita is always so warm and fluffy. \n- The free salad they give at the start is always great too. \n\nBad: \n- Took a while for the food to arrive - the venue was super busy so it was hard to get a handle of the servers. \n\nOverall a really solid place to go to and I love the food here, always feels like a healthy option compared to the other stuff around the area.', 'language': 'en', 'isFunnyCount': 1, 'isUsefulCount': 1, 'isCoolCount': 1, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/6xn1q_mY0Esm7TQQlGKMOA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/PEbncJW264braxDEtfI3Fg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/VgpZJVuEFSs6TNdxEr7VVQ/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 730, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2023-03-26T00:00:00.000Z', 'rating': 5, 'text': "I recommend Oren's Hummus. We had out of town guests, my niece and her husband, with their kids, one of whom has that affliction of his generation, a peanut allergy. We selected Oren's for its proximity to SF MOMA, where we visited in the morning. The service was so efficient we had extra time before our movie matinee we had planned, so we strolled the Embarcadero afterward. Our waitress also was friendly, explaining how everyone takes a turn making the mint lemonade. \n\nThat drink, with refills included, is to be commended. It is tart. There could be no doubt it is fresh and not from concentrate. It might be too good, meaning too strong, for some palates. I split the plant based lamb pita and the traditional sabich pita. Both were excellent. The sweet potato fries were a shared dish and enjoyed by all, ranking among the best ever of that dish supposedly a healthier alternative to conventional fries. \n\nThe portions were good, not too much. Collectively we had enough leftover to fill a container. We did what you do in SF. We have it to a person on the street. \n\nI would patronize Oren's if I were in the neighborhood, as a casual and not expensive dining option. They have an extensive menu. They also have alcohol.", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 1, 'isCoolCount': 0, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 425, 'reviewerLocation': 'New York, NY'}, {'date': '2023-04-13T00:00:00.000Z', 'rating': 5, 'text': 'We got a group order for a small work party and it was fantastic! The hummus is soooo good. Coworkers enjoyed the beef/lamb skewers. Their pita is very very soft. The chicken was cooked perfect and paired great with the rice and tahini. My favorite dish was the Greek salad. I look forward to going to the restaurant to enjoy a meal soon!', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/A2EMmt_nFSC8Be7Z6B5uog/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 90, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2023-02-27T00:00:00.000Z', 'rating': 5, 'text': "Great place! Oren's is a nice restaurant and a nice restaurant where you get so much food, rather than a couple bites. We went here on a Wednesday night and were seated immediately. Our waitress was very attentive and helpful. We had a falafel bowl and a ton of sides. Everything was so tasty! The sides all complemented the bowl and could also be thoroughly enjoyed on their own. This was plenty of food for two people. And such good vibes in there.\n\nMy one gripe was we were asked about ordering alcohol a bunch of times. We don't drink and I guess we could've made that clear on the first ask but we were asked like 4 times. All good, 5 stars.", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/UEy99LI-InhB4yFy9lsO8Q/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 92, 'reviewerLocation': 'San Diego, CA'}], 'availableReviewsLanguages': [{'language': 'English', 'languageCode': 'en', 'totalReviews': 896}, {'language': 'German', 'languageCode': 'de', 'totalReviews': 2}, {'language': 'Italian', 'languageCode': 'it', 'totalReviews': 1}, {'language': 'Chinese', 'languageCode': 'zh', 'totalReviews': 1}]}, {'directUrl': 'https://www.yelp.com/biz/kokkari-estiatorio-san-francisco', 'bizId': 'PsY5DMHxa5iNX_nX0T-qPA', 'name': 'Kokkari Estiatorio', 'since': '', 'phone': '(415) 981-0983', 'amenitiesAndMore': ['Takes Reservations', 'Masks required', 'Pescatarian Options', 'Vegan Options', 'Many Vegetarian Options', 'Accepts Credit Cards', 'Accepts Android Pay', 'Accepts Apple Pay', 'Classy', 'Moderate Noise', 'Offers Catering', 'Good for Groups', 'Good For Kids', 'Good for Dinner', 'Valet Parking, Garage Parking, Street Parking, Private Lot Parking', 'Waiter Service', 'Full Bar', 'TV', 'No Outdoor Seating', 'No Wi-Fi', 'No Happy Hour', 'Dogs Not Allowed', 'Bike Parking', 'Compostable containers available', 'Provides reusable tableware'], 'healthScore': 'PASS', 'operationHours': [{'day': 'Mon', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Tue', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Wed', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Thu', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Fri', 'regularIsClosed': False, 'regularHours': ['11:30 AM - 11:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sat', 'regularIsClosed': False, 'regularHours': ['5:00 PM - 11:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sun', 'regularIsClosed': False, 'regularHours': ['5:00 PM - 10:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}], 'upcomingSpecialHours': [], 'website': 'http://www.kokkari.com', 'images': [{'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/FTQfPJubJEtYeyHqwAsVKw/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Octapodaki Tou Yiorgou/Octopus- so tender'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/WPfngjzNOetc6RnGG9OoVA/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Rear dining room at Kokkari Estiatorio in San Francisco.'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/qYjEM7ZmOtGFDY1uwFY4ZQ/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Zucchini Cakes'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/0PB8sJbVHrzDtF5P27dxMQ/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Kokkari salad'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/iKlcUAcX0t_Y2LIeV_wEpQ/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Kokkari sundae with their homemade ice cream'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/89r3Tzyrkhhe-moz1rX_tw/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Grilled Lamb Chops'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/DCQj3LDu8fBB9nUf1UvfWg/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Kolokithokeftethes/Zucchini Cakes'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/IoUJfHtNXfwg5yOpcucZbg/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Garides skordates (roasted wild gulf prawns)'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/INFMKEicuirHvgTDsUi6Jw/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Reisling'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/qE237b5cgtZrmM9c_T1IbA/258s.jpg', 'alt': 'Photo of Kokkari Estiatorio - San Francisco, CA, United States. Bar area at Kokkari Estiatorio in San Francisco.'}], 'address': {'addressLine1': '200 Jackson St', 'addressLine2': '', 'addressLine3': '', 'city': 'San Francisco', 'regionCode': 'CA', 'postalCode': '94111', 'country': 'US'}, 'type': 'Restaurants', 'primaryPhoto': 'https://s3-media0.fl.yelpcdn.com/bphoto/FTQfPJubJEtYeyHqwAsVKw/l.jpg', 'priceRange': '$31-60', 'cuisine': 'Greek', 'categories': ['Restaurants', 'Greek'], 'aggregatedRating': 4.5, 'reviewCount': 5069, 'businessHighlights': [], 'scrapeFinishedAt': '2023-04-16T08:41:04.859Z', 'reviews': [{'date': '2023-02-28T00:00:00.000Z', 'rating': 5, 'text': 'Four observations: \n \xa0 \xa0Elegant interior. Attentive Service. Wonderful food,\n \xa0 \xa0Worth the expense!\n\nMichael D.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 1, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 1, 'reviewerLocation': 'West San Jose, San Jose, CA'}, {'date': '2023-04-05T00:00:00.000Z', 'rating': 5, 'text': "Went here with a couple friends, absolutely LOVE the food. Omg this is actually to die for. We made a reservation months ahead of time-- the anticipation was so worth it. There's so many incredible eateries in Embarcadero and Kokkari Estiatorio is definitely one of the best.\n\nUpscale while cozy atmosphere (esp if you're near the fireplace). If you're stuck on recommendations, the staff are more than knowledgeable enough to share their personal favorites + wine pairings. Our group of 4 shared:\n\n- MELITZANOSALATA (excellent sampler of fresh spreads, must try the roe dip!)\n- HALLOUMI STO FOURNO (MY fav-- savory, crispy, AND tart with fresh pomegranate)\n- OCTAPODAKI TOU YIORGOU (very smoky, super tender)\n- PSARI PSITO (rotates, this was some type of sweet whitefish)\n- KOTOPOULO SOUVLAS (flavorful, succulent-- a whole meal in itself)\n\nOther than your basic gyros, souvlaki, general ambiguously Mediterranean-inspired dishes, I've had no other exposure to Greek food-- Kokkari was a lovely introduction to their finer fare. Will be back!", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 1, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/f5ESJk1MQez30MCb7u9apw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/0d2nzgF4-GId5EIWTyuqag/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/sWOewie3463rBZivuoXAVg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/-93hbg8_qtLXkd2tjuZadw/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 621, 'reviewerLocation': 'Berkeley, CA'}, {'date': '2023-04-09T00:00:00.000Z', 'rating': 4, 'text': "Loved the food and great for group dinners\nWent with a big group and the server was very patient with us in explaining the menu and accommodating our requests. \nAll the cheese were great, zucchini cake was also yummy. We ordered the dips platter to taste the different kinds. Greatly recommend for bigger groups cuz it's easy to share.\nFor main, I ordered the lamb chop, which is just okay... the taste was great but a bit too hard to chew. \nIn general good portion of food, great taste, and nice environment!", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/9Nv848BM5YXVv_fdOp4hnw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/hbjEsBExzLk9OtRZDF3cIQ/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/pXmBe3-1HwYcasBcQ6JHPA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/4EeyH5PAdlWdYlpNX18m1w/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 56, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2023-04-04T00:00:00.000Z', 'rating': 5, 'text': 'Came here on a Friday at around 2pm for lunch, and the hostess Carlye was super kind and accommodating. This restaurant is huge, and the chairs and decor is very comfortable.\n\nWe ordered several appetisers - caviar dip with pita, zucchini cakes, saghanaki, and the lamb riblets. All were super delicious, flavourful and brought out very quickly. For entree we got one lamb chop each, and shared a whole fish. Cindy gave us really good recommendations, and it was definitely enough food for two people.\n\nWe finished off with the blood orange pastry and the strawberry granita, both of which were not too heavy and really delicious, a great way to end off a meal.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/Omp6QfvnlOcvUYN4qTjvNg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/3VjfY3GXg12uOZiVWQr0-Q/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/GKrftfVcRA6gERTS-JQteg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/r3_XiVov4VqQdcPC2nGSmQ/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 68, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2023-03-30T00:00:00.000Z', 'rating': 4, 'text': 'Highlights of Kokkari was honestly the dessert and the apps. Pretty fancy atmosphere and really really great service. Also a delicious selection of greek wine... recommend getting a bottle of santorini wine to share with the table! As for the food itself:\n\n-Zucchini Cakes (5/5): these are some of my favorite greek apps and these were so good! The dip it came with was thick yet light and the zucchini cakes themselves were stuffed with zucchini, not oily or over fried at all, and you were definitely able to see and taste the thin shreds of zucchini\n\n-Spanakotiropita (3/5): very flaky and flavorful, but a little much on the cheese side (overpowering the other great ingredients inside)\n\n-Octopus (4/5): succulent, charred, flavorful. a little too generous with the olive oil though. On par with other delicious octopus I have had before\n\n-Dip platter (2.5/5): honestly a bit disappointing. the pita was not warm and the only dip I really enjoyed, although it was slightly thicker and heavier than usual, was the tzatziki.\n\n-Sea Bass (3.5/5): I thought the fish was really good. the skin was so thin and crisp and honestly stole the show. The fish could have been slightly more tender though and it did get a little old... maybe a couple more sides other than just boiled greens could have been nice to complement the flavors of the fish\n\n-Yiaourti Granita (5/5): wow SO GOOD. did not expect this dessert to be so light, tart, and flavorful. the yogurt sorbet was thicker than I expected (more of an ice cream consistency) but it was so light and tart in flavor. It paired so well with the refreshing fruit sorbet. The dessert also came with a delicious, slightly sweet candied nut shell that was so thin, light and flavorful and honestly was so fun to break it apart and eat it by itself or with the sorbet!! So so good highly recommend this dessert', 'language': 'en', 'isFunnyCount': 1, 'isUsefulCount': 1, 'isCoolCount': 1, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/hocAIxVhMIRv-lbExoCYsA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/DCQj3LDu8fBB9nUf1UvfWg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/SYZ5wicDwEPRHGPOBBwRhw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/QbU0Ni6ZWb2yzF7527tNkQ/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 157, 'reviewerLocation': 'San Francisco, CA'}], 'availableReviewsLanguages': [{'language': 'English', 'languageCode': 'en', 'totalReviews': 5064}, {'language': 'Swedish', 'languageCode': 'sv', 'totalReviews': 2}, {'language': 'Italian', 'languageCode': 'it', 'totalReviews': 1}, {'language': 'German', 'languageCode': 'de', 'totalReviews': 1}, {'language': 'Turkish', 'languageCode': 'tr', 'totalReviews': 1}, {'language': 'Spanish', 'languageCode': 'es', 'totalReviews': 1}, {'language': 'Chinese', 'languageCode': 'zh', 'totalReviews': 1}]}, {'directUrl': 'https://www.yelp.com/biz/sababa-san-francisco-3', 'bizId': '_oZ8X3onXs6TRgHBewJdYg', 'name': 'Sababa', 'since': '', 'amenitiesAndMore': ['Offers Delivery', 'Offers Takeout', 'Many Vegetarian Options', 'Outdoor Seating', 'Classy', 'Casual Dress', 'Good for Lunch', 'Wheelchair Accessible', 'No Waiter Service', 'No Wi-Fi', 'No Happy Hour', 'No Alcohol'], 'operationHours': [{'day': 'Mon', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 2:30 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Tue', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 2:30 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Wed', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 2:30 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Thu', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 2:30 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Fri', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 2:30 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sat', 'regularIsClosed': True, 'regularHours': None, 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sun', 'regularIsClosed': True, 'regularHours': None, 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}], 'upcomingSpecialHours': [], 'website': 'http://sababasf.com', 'images': [{'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/OnJre4Xohysbzkh_X-zJgw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Signature falafel Sandwich'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/UTox_vJG_2zHanlDlPfxSw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Nice piece of Baklava for dessert!'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/-eVjGCXjmPwNxnFs9UicHA/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Sabik Sandwich'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/l0Ee7RhEsHKpia4PQlnZ0A/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Bowl- so good!!'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/X2kQa8UqtqjiUb_RE2W4zg/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Falafel pita'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/2Hz3IbrK7RpDTstnuPKqnw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Kofta Bowl with Quinoa (mealpal)'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/b3hLAQyi2uW9F9DK7HVXmA/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Freshly baked pita'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/IhySRAIsf0vDDop2i48T3Q/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/XIMSzL8TdZk6gV8vMFsVag/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Falafel with red cabbage and cauliflower plate (mealpal)'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/OJLA5spL3xDk1ZpAYfdQXA/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States. Pickled Cabbage, Roasted Cauliflower, Moroccan Carrot'}], 'address': {'addressLine1': '71 Stevenson St', 'addressLine2': 'Ste 100', 'addressLine3': '', 'city': 'San Francisco', 'regionCode': 'CA', 'postalCode': '94105', 'country': 'US'}, 'type': 'Restaurants', 'primaryPhoto': 'https://s3-media0.fl.yelpcdn.com/bphoto/OnJre4Xohysbzkh_X-zJgw/l.jpg', 'priceRange': '$11-30', 'cuisine': 'Middle Eastern', 'categories': ['Restaurants', 'Middle Eastern'], 'aggregatedRating': 4.5, 'reviewCount': 22, 'businessHighlights': [], 'scrapeFinishedAt': '2023-04-16T08:41:07.084Z', 'reviews': [{'date': '2023-04-11T00:00:00.000Z', 'rating': 5, 'text': 'Amazing food!! \nI had their falafel sandwich and I absolutely loved it. The pita bread was fresh and all ingredients were so well made. The pita was huge, more than enough for one person. Definitely one of the best Mediterranean sandwiches out there.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 10, 'reviewerLocation': 'Factoria, Bellevue, WA'}, {'date': '2022-09-19T00:00:00.000Z', 'rating': 5, 'text': "I haven't written a review of Sababa in Kearny st recently. \xa0So I thought I had the time to write one for Sababa in SoMa, next to Yank Sing as a second location. \xa0I wanted to have a small meal before I waited last evening to visit the dentist and have my upper right wisdom tooth removed. \xa0I'll probably buy a lunch box from Proper Foods another time. \xa0Sababa's pita pocket packed enough punch before my afternoon stroll towards Oktoberfest at Schroeder's. \xa0I liked how every staff member even things up to the pita pocket, ranging from falafel to assorted vegetables, and topped it off with shredded parsley. \xa0With all the good quality ingredients, every bite was wholesome goodness to-go.\n\nWant quick bite? \xa0Head over to Sababa for some Middle Eastern twists that never disappoint.", 'language': 'en', 'isFunnyCount': 1, 'isUsefulCount': 1, 'isCoolCount': 1, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/AObHUYw65Q6M7irNH_EiHg/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/_RJ7FVzgWjBHqMT9vZXAzA/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/UTox_vJG_2zHanlDlPfxSw/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 472, 'reviewerLocation': 'San Francisco, CA'}, {'date': '2022-11-14T00:00:00.000Z', 'rating': 5, 'text': "Their falafel sandwich (Pita sandwich) is really good for vegetarians and it's very filling. It's my go to lunch spot everytime when I'm at workplace.", 'language': 'en', 'isFunnyCount': 1, 'isUsefulCount': 1, 'isCoolCount': 2, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/IhySRAIsf0vDDop2i48T3Q/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 135, 'reviewerLocation': 'Fremont, CA'}, {'date': '2023-03-30T00:00:00.000Z', 'rating': 3, 'text': "You know what the food wasn't bad but it just felt very average. The meat was a bit dry, the salads were very flavorful. It was a meal you won't remember but at the same time I can't see myself eating this everyday. Service was fast which was nice.", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/8FjzTyJN7PeKk70zc5BI6Q/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 7, 'reviewerLocation': 'Danville, CA'}, {'date': '2022-09-04T00:00:00.000Z', 'rating': 4, 'text': "Yum! I'm so glad I found this place because it's so well priced and VERY close to my office. I think I just found my new go-to work lunch! I love that there are so many veggie options too, makes for the perfect mid day meal. If you're sick of standard office salads too, this place might be right for you!", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 1, 'isCoolCount': 1, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 76, 'reviewerLocation': 'San Ramon, CA'}], 'availableReviewsLanguages': [{'language': 'English', 'languageCode': 'en', 'totalReviews': 22}]}, {'directUrl': 'https://www.yelp.com/biz/sababa-san-francisco', 'bizId': '_BDoTBI2YlyUaWFOXBEF8Q', 'name': 'Sababa', 'since': '', 'phone': '(415) 800-6853', 'amenitiesAndMore': ['Offers Delivery', 'Offers Takeout', 'No Reservations', 'Vegan Options', 'Many Vegetarian Options', 'Accepts Credit Cards', 'Accepts Apple Pay', 'Accepts Android Pay', 'Accepts Cryptocurrency', 'Outdoor Seating', 'Classy, Casual', 'Quiet', 'Casual Dress', 'Offers Catering', 'Good For Kids', 'Good for Lunch', 'Beer & Wine Only', 'Wheelchair Accessible', 'Gender-neutral restrooms', 'Not Good For Groups', 'No Waiter Service', 'No Wi-Fi', 'No Happy Hour', 'Dogs Not Allowed', 'No TV', 'Bike Parking'], 'healthScore': 'PASS', 'operationHours': [{'day': 'Mon', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 7:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Tue', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 7:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Wed', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 7:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Thu', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 7:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Fri', 'regularIsClosed': False, 'regularHours': ['11:00 AM - 7:00 PM'], 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sat', 'regularIsClosed': True, 'regularHours': None, 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}, {'day': 'Sun', 'regularIsClosed': True, 'regularHours': None, 'hasSpecialHours': False, 'specialIsClosed': None, 'specialHours': None}], 'upcomingSpecialHours': [], 'website': 'https://www.sababasf.com', 'images': [{'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/ZJldXjthPCLVjeJi2H1YVg/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/_hy9dpt5iIllyCmYaSsqgg/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/Bnnm6RRa1B4ft4i1tukIGw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/KdaLa1DpGGvZxHQIfvofPQ/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/gJTU-uCsADI1lAFQyxGT_w/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/mgGzXvr00h5r3X5VF848Tw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/OKYJkp8xj1aA1YD144uJIw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/MJsHiSMFXGG4rn2ocGOFzw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/VPHgbS_NWwW9ePQzj2CWYw/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}, {'link': 'https://s3-media0.fl.yelpcdn.com/bphoto/vMQKcTBqqstCIDPy7yu8ew/258s.jpg', 'alt': 'Photo of Sababa - San Francisco, CA, United States'}], 'address': {'addressLine1': '329 Kearny St', 'addressLine2': '', 'addressLine3': '', 'city': 'San Francisco', 'regionCode': 'CA', 'postalCode': '94108', 'country': 'US'}, 'type': 'Restaurants', 'primaryPhoto': 'https://s3-media0.fl.yelpcdn.com/bphoto/ZJldXjthPCLVjeJi2H1YVg/l.jpg', 'priceRange': '$11-30', 'cuisine': 'Mediterranean', 'categories': ['Restaurants', 'Mediterranean'], 'aggregatedRating': 4.5, 'reviewCount': 395, 'businessHighlights': [], 'scrapeFinishedAt': '2023-04-16T08:41:08.137Z', 'reviews': [{'date': '2023-02-08T00:00:00.000Z', 'rating': 5, 'text': 'Among the best falafel wraps I have ever had! \n\nThis place is a custom wrap kinda place where you add what you want to, in the wrap. \n\nOptions of falafel along with lettuce, tabouli, pickles, tomato & cucumber mix. \n\nExcellent freshly made falafels. They have falafel bowls too. Definitely worth a try here.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 5, 'reviewerLocation': 'Financial District, San Francisco, CA'}, {'date': '2023-02-19T00:00:00.000Z', 'rating': 4, 'text': "I first tried the Sabik pita sandwich in Israel. Till then I thought the only vegetarian option for a pita bread was with a falafel. But fried eggplant and boiled egg can take the humble pita to another level. Served with skug, a aioli kind of dip. \xa0I had seen pictures of Amba sauce being served on the side at Sababa but it was missing in our takeaway. Even if you are not a vegetarian do try the Sabik Pita sandwich. \nI also ordered a Rice bowl with roasted cauliflower and fried eggplant( because I am obsessed with it ). This is really very filling. The quantities served is pretty decent and good value for money in todays inflationary environment. \n\nI went to the Kearny location but there's one on Stevensons street as well. If you want to look beyond hummus and falafel , do pay this place a visit for a flavor filled middle eastern experience", 'language': 'en', 'isFunnyCount': 1, 'isUsefulCount': 1, 'isCoolCount': 1, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/Pq2VD1E3LDGL5BDTTEm9xw/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/WBxsG4QXKQ2JE7vO0BspmQ/o.jpg', 'https://s3-media0.fl.yelpcdn.com/bphoto/SGhBZzNyhREOOKsNpVBCOg/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 114, 'reviewerLocation': 'San Mateo, CA'}, {'date': '2023-01-25T00:00:00.000Z', 'rating': 1, 'text': 'After the treatment I received today, I won\'t be returning (unfortunate since I\'ve been multiple times & enjoyed their food )... \n\nBasically the cashier seemed rattled with my presence --as though I didn\'t fit a "particular demographic". Prejudice was written all over his face but I chose to overlook it with kindness....but damn how much more sing-songy & polite did I need to be cuz he was bent on me being a nuisance. \xa0\n\nWhen I went to pay he *sternly* ordered I hand over my credit card to swipe it (the general machine he said wasn\'t working so he\'d have to do it from his end. Not a problem but I hesitated with the frenzied energy he directed at me--- \xa0I currently have THREE cards in my wallet that have been scraped up from mishandling & I didn\'t want this to be the same . As I hand it over, I POLITELY try to explain to him what my reservation was & he shuts me down & brushes me off like problematic scum. No eye contact the entire time. He then roughly swiped my card! And after, in a fake performative smile blurts "Thank You" .. with colluding energy towards the White Guy standing behind me. \n\n I absolutely WON\'T be patronizing here anymore. If I\'d simply asked for my card back & walked out the store...I COULD TELL NARRATIVE WAS ALREADY BEING SPUN THAT I\'D REFUSED CUZ MY CARD WAS PROBABLY "STOLEN". I\'m not about to go anywhere where I\'m treated suspect or feel threatened to be held hostage off some narrative someone weaves... because *THEY* got issues. ABSOLUTELY NOT! I don\'t need that in my life. Not happening in 2023.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 2, 'isCoolCount': 1, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 134, 'reviewerLocation': 'Oakland, CA'}, {'date': '2023-03-23T00:00:00.000Z', 'rating': 1, 'text': 'Ordered a Falafel Pita Sandwich, as seen on the box. Due to a dietary restriction, I am not able to eat chicken or meat at the moment, so I went with the falafel option. However, upon opening my sandwich, it had zero falafel and was stuffed with chicken.', 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': ['https://s3-media0.fl.yelpcdn.com/bphoto/bit_tUnlk3wFzMKSVJLxpQ/o.jpg'], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 7, 'reviewerLocation': 'San Bruno, CA'}, {'date': '2023-03-26T00:00:00.000Z', 'rating': 5, 'text': "Excellent food and service!! Absolutely loved every dish I ate and can't wait to go back!'", 'language': 'en', 'isFunnyCount': 0, 'isUsefulCount': 0, 'isCoolCount': 0, 'photoUrls': [], 'reviewerName': None, 'reviewerUrl': None, 'reviewerReviewCount': 72, 'reviewerLocation': 'Seattle, WA'}], 'availableReviewsLanguages': [{'language': 'English', 'languageCode': 'en', 'totalReviews': 394}, {'language': 'German', 'languageCode': 'de', 'totalReviews': 1}]}]

template = """
User query: {user_query}

I'm going to give you a set of reviews for a business. 
Based on the user query, I want you to determine what industry the business belongs in. 

If the user query above contains characteristics on which to rank or evaluate this type of businesses, then
use those characteristics. (For example, for a restaurant, the user may prioritize 
ambiance followed by deliciousness of the food which are two characteristics that you want to evaluate
using the reviews). 

If the user query does not contain characteristics, then use the default values below for each type of business:then use your best judgment to come up with 
Restaurant/food businesses: Deliciousness & Service
Medical businesses: Quality of care & Bedside manner
Haircuts/Barbers/Salons: Customer satisfaction & quality of care

If the default values above don't match the business from the user query, then use your best judgment
to come up with two important characteristics by which this type of business should be evaluated. 

The main way you will evaluate the business on the above characteristics is by examining 
its reviews. For each characteristic, you will use the reviews to provide a decimal score out of 5 
for that characteristic as well as the most relevant snippets of text from the reviews 
that provide evidence for your rating. 

Each review is in the following format:
---
Review Text: 

Here are the reviews for the business {n}:

---
Review Text: {r1}

---
Review Text: {r2}

---
Review Text: {r3}

---
Review Text: {r4}

---
Review Text: {r5}

Remember you must output the following format:
Name of Business:
Name of characteristic 1: 
Score of characteristic 1: 
Evidence for characteristic 1, i.e text snippets from reviews: 
Name of characteristic 2:
Score of characteristic 2: 
Evidence for characteristic 2, i.e text snippets from reviews: 
"""

prompt_template = PromptTemplate(
    input_variables=["user_query", "n", "r1", "r2", "r3", "r4", "r5"],
    template=template,
)

# dataset_items is a list of dictionaries-- it has the following keys in its dictionary:
# dict_keys(['directUrl', 'bizId', 'name', 'since', 'phone', 'amenitiesAndMore', 'healthScore',
# 'operationHours', 'upcomingSpecialHours', 'website', 'images', 'address', 'type', 'primaryPhoto',
# 'priceRange', 'cuisine', 'categories', 'aggregatedRating', 'reviewCount', 'businessHighlights',
# 'scrapeFinishedAt', 'reviews', 'availableReviewsLanguages'])

# dataset_items[0]['reviews'][0].keys() ===
# dict_keys(['date', 'rating', 'text', 'language', 'isFunnyCount', 'isUsefulCount', 'isCoolCount',
# 'photoUrls', 'reviewerName', 'reviewerUrl', 'reviewerReviewCount', 'reviewerLocation'])

for item in dataset_items:
    n = item["name"]
    reviews = []
    for review in item["reviews"]:
        reviews.append(review["text"])

    prompt = prompt_template.format(user_query = USER_QUERY,
                  n=n,
                  r1=reviews[0],
                  r2=reviews[1],
                  r3=reviews[2],
                  r4=reviews[3],
                  r5=reviews[4]
    )

    params = {
        "engine": "text-davinci-003",
        "prompt": prompt,
        "max_tokens": 500,
        "temperature": 0.2
    }

    # Send the request to the API and get back the response
    response = openai.Completion.create(**params)
    raw_answer = response.choices[0].text
    a = raw_answer.split('\n')[1:]
    keys = ["business_name", "c1_name", "c1_score", "c1_evidence", "c2_name", "c2_score", "c2_evidence"]
    final_response = {}
    for j, raw_val in enumerate(a):
        final_response[keys[j]] = ''.join(raw_val.split(':')[1:]).strip()

    final_response["primary_photo"] = item["primaryPhoto"]
    final_response["review_count"] = item["reviewCount"]
    final_response["categories"] = item["categories"]
    final_response["operation_hours"] = item["operationHours"]
    print(final_response)
    pdb.set_trace()
    print(raw_answer)
    print(5)